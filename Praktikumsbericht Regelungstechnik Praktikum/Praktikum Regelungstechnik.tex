\documentclass[10pt]{scrartcl}
\usepackage{graphicx}
\usepackage{float}
\usepackage{amsmath}
\usepackage[utf8]{inputenc} 
\usepackage[T1]{fontenc}
\usepackage{lmodern}
\usepackage{amsfonts}   
\usepackage{amssymb}
\usepackage{mathtools}
\usepackage{epstopdf}
\usepackage{subfigure} 

 
\begin{document}
\title{Praktiukumsarbeit zum Praktikum Regelungstechnik}
\author{Christian Küllmer, Jonas Kallweidt, Leon Blum}
\date{\today{}, Kassel}
\maketitle
\newpage
%Inhaltsverzeichnis
\renewcommand{\contentsname}{Inhaltsverzeichnis}
\tableofcontents
\newpage
% ?????????das Abbildungsverzeichnis, falls wir das haben wollen?????????????????????
\listoffigures



%Mathlab Aufgabe
\section{Rechnerteil Aufgaben aus Kapitel 9.3. des Praktikumsskrips}
In diesem Anteil geht es um die in Aufgabe 9.3a. Dieser bezeichnet das Aufstellen der Gleichungen aus den gegeben Gleichungen. Die Gleichungen sind gegen als Blockschaltbild gegeben. Diese werden jetzt übersetzt in Mathlab Simulink.

%\begin{itemize}
%\item Startwerte
%Als Startwerte wurde gegeben:

%\begin{align}
%   	c &= 1 \\k &= 300  \\ T& = 0,1\\ g &= 9,81\, \frac{m}{s^2} \\l &= 1\, m\\m &= 7\, kg
%\end{align}

	
	


%\item Gegebenes Blockschaltbild:
%\begin{figure}[H]
%	\centering
%	\includegraphics[width=0.6\textwidth]{Aufgabe9aMotorarm.png}
%	\caption{Motorarmmodell als Blockschaltbild}
%	\label{img:grafik-dummy}
%\end{figure}
%\begin{figure}[H]
%	\centering
%	\includegraphics[width=0.6\textwidth]{Aufgabe9aStreckeMotor.png}
%	\caption{Modell des Motors als Blockschaltbild}
%	\label{img:grafik-dummy}
%\end{figure}
%\end{itemize}

\subsection{Wichtiger Hinweis:}
Für alle in diesem Bereich folgenden Auswertungen gibt folgende Farbkonvention
\begin{itemize}
\item Die rote Kurve entspricht dem Winkel $\varphi$
\item Die blaue Kurve entspricht dann der Winkelgeschwindigkeit $\dot \varphi$
\item Die grüne Kurve entspricht der Winkelbeschleunigung  $ \ddot \varphi$
\end{itemize}

%Version von Jonas und Christian vom 24.07.2019

\subsection{Aufgabe a) Gebautes Simulink Modell}
\begin{figure}[H]
	\centering
	\includegraphics[width=0.7\textwidth]{Theoretischer Teil/SimulinkModell.jpeg}
	\caption{In Simulink gebautes Modell des Systems des Roboterarms}
	\label{img:grafik-dummy}
\end{figure}

%Version von Jonas und Christian vom 24.07.2019
\newpage
\subsection{Aufgabe b)}
Das System wird simuliert und die Zustandsgrößen werden über einen Zeitverlauf dargestellt. Dabei entstehen folgende Diagramme:


\begin{figure}[H]
	\centering
	\includegraphics[width=1\textwidth]{9b}
	\caption{Darstellung des Winkels für eine anfängliche Auslenkung von 40 Grad. }
	\label{img:grafik-dummy}
\end{figure}
%Ungeregelt ist hier der Falsche Ausdruck, das was als Regelung bezeichnet wurde ist eig die Stellgröße
Aus dem Diagramm Figure 4 geht hervor, dass das System ein stabiles System darstellt,solange keine Stellgröße eingeprägt wird und dabei für gewöhlich eine Ruhelage bei 0\,$^\circ$ annehmen kann, wenn vorher keine Auslenkung vorgenommen wurde. Hier geht die Auslenkung auf keinen stationären Endwert, da die Expotentialfunktion zur Beschreibung der Dämpfung niemals null wird. In einem Realen System wird hier aber wahrscheinlich ein Stillstand nach beliebig langer Wartezeit eintreten, wenn der Roboterarm die Haftreibung nicht mehr Überwinden kann und die Bewegung im Aperiodischen Grenzfall endet.

%Version von Jonas und Christian vom 24.07.2019
\newpage
\subsection{Aufgabe c)}
Es soll eine Simulation angezeigt werden, die die Startwerte 

\begin{align}
\varphi  (0) &= 0 \\
\dot \varphi (0) &= 0 \\
u(t)  &= \binom{0\,\,\,\,\,\,\,\,\, für\,\, t<1}{0.17\,\, für\,\, t \geq 1}
\end{align}
\begin{figure}[H]
	\centering
	\includegraphics[width=0.8\textwidth]{9c}
	\caption{Darstellung des Winkels für eine anfängliche Auslenkung von 40 Grad. }
	\label{img:grafik-dummy}
\end{figure}
Das System befindet sich zunächst in Ruhelage
zum Zeitpunkt t=1 wird ein Drehmoment vom Motor aufgebaut,
das den Roboterarm nach Durchlaufen eines Einschwingvorgangs 
um die neue Ruhelage in eben diese auslenkt . Diese neue Ruhelage hängt von dem Eingangsdrehmoment ab. Der Einschwingvorgang hat dabei ein gleiches Verhalten, wie der Einschwingvorgang von Aufgabe 9.3.b). 


%\varphi (0) &= 0 
%f(0) &= 0 
%
%u(t) &= 0 für t<1\\
%	0.17 für t >= 1;





%Das Simulinkmodell des Roboterarms wird für die entsprechende Schaltung verändert. Alle Veränderungen werden in dieser Grafik dokumentiert.
%Danach wird das Modell linearisiert und das dann entstehende Ergebnis wird

\subsection{Aufgabe d)}
\begin{align}
\varphi  (0) &= 0 \\
\dot \varphi (0) &= 0 \\
u(t)  &= \binom{0\,\,\,\,\,\,\,\,\, für\,\, t<1}{0.18\,\, für\,\, t \geq 1}
\end{align}
\begin{figure}[H]
	\centering
	\includegraphics[width=1.2\textwidth]{Theoretischer Teil/Aufgabe9c.png}
	\caption{Darstellung des Winkels für eine anfängliche Auslenkung von 40 Grad. }
	\label{img:grafik-dummy}
\end{figure}

Anders als im Versuch 9.3c befindet sich der Roboterarm nun zum Zeitpunkt
t = 0 nicht mehr in der Ruhelage bei einem Winkel von 0\,$^\circ$, sondern in einem 
Winkel von 40\,$^\circ$. Dies hat zur Folge, dass der Arm zunächst 
in der Zeit bis t = 1*s
sowie in der darauffolgenden Sättigungszeit des PT1-Gliedes,
das den Motor beschreibt, zurückschwingen kann.
Sobald das Drehmoment des Motors aufgebaut ist legt der Roboterarm 
an Geschwindigkeit zu und überschreitet dabei sogar die kritische 180\,$^\circ$
Marke, ab der der Arm nicht mehr zurückschwingt, sondern einen Überschlag
vollführt und weiter an Geschwindigkeit gewinnt.
Da es sich bei dem betrachtetet Roboterarm um ein gedämpftes Model
handelt, geht die Gewschwindigkeit in eine Sättigung über, bis diese um
einen konstanten Wert fluktuiert. 
 %$ \alpha\beta\gamma\delta\epsilon\varepsilon\zeta\eta\theta\vartheta\iota\kappa\lambda\mu\nu\xi\pi
 %\varpi\rho\varrho\sigma\varsigma\tau\upsilon\phi\varphi\chi\psi\omega\Gamma\Delta\Theta\Lambda\Xi
 %\Pi\Sigma\Upsilon\Phi\Psi\Omega $


\subsection{Aufgabe e)}
Um zu überprüfen, ob der Motor bei einem Arm bei einem Eingangssignal von eine Ruhelage bei 40\,$^\circ$ zur Einstellung bringt. Wird dies in Mathlab mit folgendem Eingangssignal geprüft:

\begin{align}
   u_0 = \frac{m*g*l* sin( \varphi (0))}{300} = 0,1471
\end{align}
Dies entspricht einem Drehmoment von 44,1402 Nm. Dieses Drehmoment wird im Modell als Konstante Eingangsgröße Augegebenen. Der resultierende Winkel wird dann in Grad angegeben und sollte entsprechend der Erwartung einen Winkel von 40\,$^\circ$ entsprechen.
\begin{figure}[H]
	\centering
	\includegraphics[width=1.2\textwidth]{Aufgabe9e}
	\caption{Darstelung des Winkelgraphen bei einem gegebenen Drehmoment}
	\label{img:grafik-dummy}
\end{figure}
An dem Diagramm ist explizit zu sehen, dass es sich bei der Auslenkung durch das Drehmoment u \textsubscript{0} einstellt. Diese Auslenkung entspricht im Mitte. einem Wert von 0,6971 Rad. Daraus ergibt sich eine neue Auslenkung von 40\,$^\circ$. Damit wird die Angabe aus dem Aufgabenscript bestätigt.


\subsection{Aufgabe f)}

Bei der Linearisirung durch Softwarenutzung von Mathlab ergibt folgendes Ergebnis im Bogenmaß:

\begin{align}
   G_s = \frac{428.6}{(s^3 + 10.14*s^2 + 8.944*s + 75.15)} 
\end{align}
Die Abweichung in der dritten Nachkommastelle des Zählers lässt sich dabei auf ein veränderten Rundungsalgorithmus im Programm verweisen. 
Die Ergebnisse stimmen also überein wodurch G\textsubscript{s} von nun an unsere Funktion der Strecke beschreibt.

\subsection{Aufgabe g)}

Um einen Regler zu finden, der die Stabilitätskriterien einhält stellen wir zunächst die orginale Wurzelortskurve dar.
\begin{figure}[H]
	\centering
	\includegraphics[width=0.8\textwidth]{WOZ9f}
	\caption{Wurzelortskurve des Systems G\textsubscript{s}}
	\label{img:grafik-dummy}
\end{figure}
In der Wurzelortskurve kann man direkt sehen, dass zwei Nullstellen in Richtung der zwei Nullstellen im positiven Bereich einen guten Reglner darstellen würden. Diese müssen dabei nicht die die Polstellen kompensieren, sondern lediglich im Imaginären Anteil des Wurzel Ortskurve liegen um dort den die Zerphilien Anteile der Wurzelortskurve anzuziehen.
Es entsteht folgende Ausgabe.
\begin{figure}[H]
	\centering
	\includegraphics[width=0.6\textwidth]{WOZ9f2}
	\caption{Anzeige des Ausgangswertes}
	\label{img:grafik-dummy}
\end{figure}

Die Sich damit realisierende Ausgabe wurde von dieser Wurzelortskurve erzeugt.
\begin{figure}[H]
	\centering
	\includegraphics[width=0.8\textwidth]{WOZ9f3}
	\caption{Wurzelortskurve des Systems G\textsubscript{s} mit der Anpassung zweier Nullstellen}
	\label{img:grafik-dummy}
\end{figure}

%Präsensversuche
\section{Versuch Antrieb}
a)	Die Sprungantwort des Systems soll ohne Filter ermittelt werden. Dabei zeigt sich jedoch das die Sprungantwort stark um den Wert von 300 fluktuiert.
	Nun soll die Sprungantwort mit eingeschaltetem Filter aufgenommen werden. Daraus wurde die Übertragungsfunktion durch ein PT1 Glied angenähert. Das Überschwingen wurde vernachlässigt. Die bestimmte Näherung lautet: 
\begin{align}
   G(s)_{PT1}=\frac{1275}{1+9,17s}
\end{align}
c)	Auf Basis der angenäherten Übertragungsfunktion kann nun ein Simulink Modell erstellt werden. Auf dies kann ein Regler ausgelegt werden und am realem Versuchsaufbau getestet werden.
d)	Die Vorgabe für den Regler soll eine t \textsubscript{5\%} Zeit von 0,3 Sekunden sein. Mithilfe einer Faustformel kann nun der Der Realteil des Poles bestimmt werden. Es ergibt sich dafür ein Realteil von -10 für den Pol des Geschlossenen Regelkreises des P Reglers. Der Geschlossene Regelkreis weist folgende Form auf:
\begin{align}
   G(s)_{PT1-geschlossen}=\frac{1275K_p}{1275K_p+9,17s}
\end{align}
%nun werden daraus die Pole in Abhängigkeit des Faktors K_p bestimmt. Daraus folgt das der Wert für K \textsubscript{p}=0,0711 betragen muss. 
e)	Der P-Regler wird nun am Simulink Modell getestet. Als Stationärer Endwert wird 1 angestrebt. Um diesen Zu erreichen wird eine Vorsteuerung mit dem Verstärkungsfaktor K \textsubscript{vor}= $ \frac{1600}{1581,5} $ die benötigte Stellgröße liegt über 5Volt aber im realistischen Bereich, dennoch liegt diese über 0,3 Sekunden lang an, sodass hier Handlungsbedarf besteht wenn das Reale System einen Error Code ausgibt.
f)	Der P-Regler wird mit Vorsteuerung an der realen Maschine getestet. Es fällt auf das die Maschine trotz eines überschreitens der kritischen Überspannungszeit in der Simulation korrekt arbeitet. Hier sind die Modellabweichungen so groß, dass wir die kritische Spannung weniger als 0,3 Sekunden  lang halten. Es lässt sich durch die nur näherungsweise zutreffende Streckenübertragungsfunktion in form eines PT1 Gliedes erklären. Das System ist nur für den einen Sollwert von 1600 Grad/sec stationär genau. Umso mehr die Sollwertgröße von 1600 Grad/sec abweicht desto Größer wird die Abweichung des Stationären Endwertes. Dies fällt erst bei weniger als 800 Grad/sec deutlich auf und ist bei 400 Grad/sec gut zu erkennen.
g)	Um Stationäre Genauigkeit für alle Sollwerte zu erreichen wird dem Regler ein I-Anteil hinzugefügt. Der PI-Regler wird über das SISO Tool ausgelegt. Aus den Anforderungen t \textsubscript{5\%}=0,4s und kein Überschwingen woraus sich ergibt das die Pole rein reell sein müssen ergibt sich für den schnellst möglichen Regler die Übertragungsfunktion
\begin{align}
   G(s)_{PI}=0,0074*\frac{1-7,1s}{s}
\end{align} 
ferner ist keine Vorsteuerung erforderlich, da der PI-Regler ohnehin eine stationäre Genauigkeit aufweist. 
6
	Statt dem PI-Regler soll nun eine Regelstruktur bestehend aus einem kaskadiertem P-Regler verwendet werden. Die Übertragungsfunktion 
\begin{align}
   G(s)_{p}=\frac{90653}{91,653+9,17s}
\end{align} 
	Die Übertragungsfunktion des Kaskadierten Reglers 
\begin{align}
G(s)_{ \dot{\theta}}=\frac{1}{s} = \frac{90,653}{91,653s+9,17s^2}
\end{align}
Mithilfe des SISO Tools kann ein P-Regler ausgelegt werden der die t \textsubscript{5\%} Zeit minimiert ohne dabei überzuschwingen. 
	Als Verstärkungsfaktor des P-Reglers wurde 2,5262 ermittelt.
	Die im bestimmte Kaskadenregelung soll nun in Simulink getestet werden. Als Sollwert wird dabei 90 Grad angenommen. Die dabei Benötigte Stellgröße liegt in einem realistischen Bereich und ist der Simulation nach zu Urteilen keine Gefahr für das reale System, da sie nicht länger als 0,3 Sekunden über einem Wert von 5 Volt liegt.\\
	Der zuvor in Simulink überprüfte Regler wird in das Reale System eingebaut und als Sollwert werden 90 Grad angelegt. Der Regler im echtem System bietet im Gegensatz zur Simulation keine Stationäre Genauigkeit. Dies liegt daran, dass das Modell keine Reibung berücksichtigt.
	Als Sollwert werden 10000 Grad angelegt.
%Ist Sollwert richtig?
 Allerdings ist dies ohne weiteres nicht möglich da das reale System einen Error Code ausgibt. 
Dies liegt an mehreren Problemen.
	Zuerst muss das Problem der Überspannung gelöst werden. Dies kann dadurch geschehen, dass ein Sättigungsblock in den Regelkreis eingebaut wird, sodass der Motor mit Maximal 5 Volt versorgt wird. Als nächstes muss die zu große Winkelgeschwindigkeit verringert werden. Dazu wird wieder ein Sättigungsblock eingebaut, weher die Winkelgeschwindigkeit auf Maximal 2000 Grad/sec wachsen lässt. Sind diese Probleme behoben kann der Motor in diesem Versuch einwandfrei benutzt werden. 
\newpage
\section{Versuch Schwebekörper}

7) Weiterhin ist der im Vorherigem aufgabenteil behandelte P-Regler der einfachste Regler Typ. Anstelle des P-Reglers entschieden wir uns in diesem Aufgabenteil für einen PI-Regler. Der I-Anteil macht den gesamt Regler zwar langsamer verleiht ihm aber eine wesentlich bessere Sportgrößen aus Regelung. Der PI-Regler schafft es im Gegensatz zum P-Regler sämtliche Störgrößen komplett aus zu regeln und wieder stationär Genau zu werden. Dafür hat der I-Anteil in der Streckenübertragungsfunktion nicht ausgereicht. Gemäß den im Vorherigem Aufgabenteil definierten Regelungszielen und den am PI-Regler zur Verfügung stehenden Freiheitsgraden wurde die folgende Übertragungsfunktion gewählt. 
\begin{align}
   G(s)_{PI}=0,0023995*\frac{1+5,9s}{s}
\end{align} \\
Die Sprungantwort kann im Diagramm XXa abgelesen werden.
%Einfügen der Diagramnummer !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!
8) Der Regler wird nun in das Reale Modell eingebaut und getestet. Die Sprungantwort kann im Diagram XX abgelesen werden.
Nach etwa 30 Sekunden Simulationszeit wird wie im Versuch 6 eine Störgröße aufgeschaltet. Das füht dazu, dass die Kugel wider absinkt. Die Stellgröße damit ansteigt und der Regler den über ihn gesteuerten Luftstrom erhöt. Nach ca 13 Sekunden hat der Regler die Störgröße ausgeregelt.\\
9) Um den Regler schneller in den Stationären endwert zu bekommen ist es ratsam einen D-Anteil hin zu zufügen. Dies liefert der PID-Regler.
Mit diesem soll die einschwingzeit möglichst kurz sein sowie die Störungsausregelung möglichst schnell geschehen. Als weitere Einschränkung soll der Regler eine reelle Nulstelle zwischen 0 und -3 enthalten. Als Überschwingweite sollten ca 50\% eingehalten werden.
Um dies zu erreichen wird der Regler im SISO Tool ausgeegt.
Es ergibt sich dabei die Übertragungsfunktion
\begin{align}
   G(s)_{PID}=0,0071761*\frac{(1+3,3s)(1+0,67s)}{s(1+0,02)}
\end{align} \\
10) Der oben entworfene PID-Regler wird in das Reale Modell implementiert.
Das System Soll die Endlage bei 60 cm Höhe erreichen. Nach ca 20 Sekunden wird wie in Aufgabe 8 die Störgröße aufgeschaltet. Diese Regelt der regler sehr schnell aus. In ca 5 Sekunden hat sich das System in das 5\% Band eingependelt. Das sind ca 50\% weniger Zeit als der PI-Regler benötigt hat und damit ist der PID Regler trotz des Komplexeren aufbaus bisher die Beste Wahl.
Bei ca 35 Sekunden wird erneut eine Störgröße aufgeschaltet, auch hier benötigt der PID-Regler wider 5 Sekunden um in das 5\% Band zurück zu kommen.
Auffällig ist das die Stellgröße außer direkt nach dem Anlegen eines Sollwertes am anfang der Grafik sehr konstant wirkt, was an der im vergleich zum PI-Regler geäderten Skalierung liegt.
Der Peak am Start lässt sich durch den D-Anteil erklären welcher Differenzierendes Verhalten besitzt. Idealerweise wäre der Peak beim Sprung zwischen zwei Werten damit unendlich groß. Dies kann in einem Realem Modell nicht der Fall sein. Dennnoch liegt der Sprung mit einer Höhe von ca 55 schon sehr hoch.




\begin{figure} 
\begin{center}
    \subfigure[Stellgröße]{\includegraphics[width=0.49\textwidth]{Leon-PRT-Bilder/Sch-Stell37}} 
    \subfigure[Regelgröße]{\includegraphics[width=0.49\textwidth]{Leon-PRT-Bilder/Sch-Regel37}} 
\caption{PI Regelung } 
\end{center}
\end{figure}

\begin{figure} 
    \subfigure[Stellgröße ]{\includegraphics[width=0.49\textwidth]{Leon-PRT-Bilder/Sch-Stell39}} 
    \subfigure[Regelgröße]{\includegraphics[width=0.49\textwidth]{Leon-PRT-Bilder/Sch-Regel39}} 
\caption{PID Regelung} 
\end{figure}
%---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
\newpage
\section{Versuch Kran}
\subsection{Vorbereitungsaufgaben}
\subsection{Regelung der Wagenposition y\textsubscript{w}}
\subsection{Zusätzliche regelung des Winkels $\alpha$ }
Februar 2019 durchgeführt.
a)	Es handelt sich um ein um die Ruhelage linearisiertes Zeitinvariantes System. Dies im LTI Block implementiert wird. Die Rückkopplungen sind ebenfalls Linear weshalb die gesamte Regler Struktur Linear ist.
Das Linearisierte Modell kann in zwei Versionen in Mathlab bzw. Simulink implementiert werden:
1) Es kann über die Verschiedenen Beziehungen der einzelnen Zustandsgrößen und Eingangsgrößen ein Simulink Modell erstellt werden.
2) Die Linearisierten Gleichungen in Matrizen Form können direkt in Mathlab eingegeben werden, woraus Mathlab selbstständig ein LTI System realiesiert. 
Beide Varianten liefern das gleiche Ergebnis.
Wir benutzten den 1. Weg. 
%Zweigrafiken nebeneinander: Schema
%\begin{figure} 
%    \subfigure[Bezeichnung der linken Grafik]{\includegraphics[width=0.49\textwidth]{ordner/name1.jpg}} 
%    \subfigure[Bezeichnung der rechten Grafik]{\includegraphics[width=0.49\textwidth]{ordner/name2.jpg}} 
%\caption{Titel unterm gesamten Bild} 
%\end{figure}
\begin{figure} 
    \subfigure[Simulink Modell ]{\includegraphics[width=0.6\textwidth]{Leon-PRT-Bilder/Simulink1}} 
    \subfigure[Simulink LTI Block]{\includegraphics[width=0.42\textwidth]{Leon-PRT-Bilder/Simulink2}} 
\caption{Simulink Modell mit aufgetrennter Rückkoplung} 
\end{figure}
Aus dem Modell werden die Übertragungsfunktion und ihre Pole bestimmt.
\begin{align}
   G_{(s)}=\frac{-34,18s+0,04443}{s^3+48,51s^2+954,4}
\end{align}
Diese Übertragungsfunktion besitzt folgende Pole:
\begin{align}
-48,3558 \notag \\
-0,0939+4,437i  \notag \\
-0,0939-4,437i \notag 
 \end{align} 
Davon entfallen folgende Pole auf die Last: 
\begin{align}
-0,0939+4,437i  \notag \\
-0,0939-4,437i  \notag 
\end{align}
Und dementsprechend entfällt auf den Kran der folgende Pol:
\begin{align}
-48,3558  \notag 
\end{align}
Die Last ist, im Gegensatz zum Wagen, schwingungsfähig, weshalb diese Pole einen imaginären Anteil aufweisen. Die Pole des Wagens werden hingegen rein reell modelliert. 
Daraus ergibt sich die über die Faustformel für das Einschwingen in das 5\% Band Folgender Ausdruck
\begin{align}
t_{(5\%)}=\frac{-3}{Re(s_D)}=33,3
\end{align}
%d)
 Als sinnvolle Einschwingzeit für das geregelte System wurde eine Einschwingzeit von  3,3 Sekunden gewählt, was einer Dekade weniger als die des ungeregelten Systems beträgt. Aus dieser Überlegung ergibt sich als gewünschter Überlegung über die obrige Faustformel ein Realteil des dominanten Poles der Last von -1. Über eine Bedingung für die Maximale Überschwingweite könnten nun die Imaginär Anteile bestimmt werden. (Hier nicht gegeben.) \\
%e)
Mithilfe des SISO Tools kann der Regler Parameter R \textsubscript{a}
über die Wurzelortskurve und die Sprungantwort bestimmt werden.
R \textsubscript{a} = - 2,6 \\
%f)
Das System wird für folgende Parameter simuliert:
R \textsubscript{a} = 1
 y \textsubscript{w} = 1\\

Daraus ergibt sich das folgende Ergebnis: 
\begin{figure} 
    \subfigure[Simulation Sprungantwort lila: y , braun: $\alpha$]{\includegraphics[width=0.49\textwidth]{Leon-PRT-Bilder/Figure44f}} 
    \subfigure[Reale System]{\includegraphics[width=0.49\textwidth]{Leon-PRT-Bilder/Figure44g}} 
\caption{ Gegenüberstellung Simulation und Experiment} 
\end{figure}
(g+h) Der Regler soll nun am Realem System getestet werden
Der Regler dämpft die Schwingung deutlich besser als das ungeregelte System. Es liegt aber trotzdem weit weg von der Simulation bei der wir nach 3,3 Sekunden im 5\% Band liegen. Im Vergleich, dieser Zustand ist im realem System erst nach ca. 5,5 Sekunden erreicht. Dennoch liegt die Maximale Winkelauslenkung des Realem Systems unter der der Simulation. Das verlangsamte einschwingen kann durch die Sättigung des Motors erklärt werden, welcher nur bei Spannungen bis ?5Volt? die Regelung des Winkes einbeziehen kann. Das führt dazu, dass die Regelung erst später beginnt zu arbeiten und damit das System langsamer wird. Die Regelung arbeitet die Erste 2,5 Sekunden nicht und diese Braucht das reale System länger um die Ruhelage zu erreichen. Das Maximale Überschwingen ist geringer, da der Motor auch die Bewegung in y Richtung nicht beliebig Schnell durchführen kann sondern auch hier gesättigt ist. Außerdem wurde im Modell keine Gleitreibung berücksichtigt.

Antrieb 
5: Drehzahlregelung
	Die Sprungantwort des Systems soll ohne Filter ermittelt werden. Dabei zeigt sich jedoch das die Sprungantwort stark um den Wert von 300 fluktuiert.
 
	Nun soll die Sprungantwort mit eingeschaltetem Filter aufgenommen werden. Daraus wurde die Übertragungsfunktion durch ein PT1 Glied angenähert. Das Überschwingen wurde vernachlässigt. Die bestimmte Näherung lautet: 
\begin{align}
G(s)_{PT1}=1275/(1+9,17s)
 \end{align}
	Auf Basis der angenäherten Übertragungsfunktion kann nun ein Simulink Modell erstellt werden. Auf dies kann ein Regler ausgelegt werden und am realem Versuchsaufbau getestet werden.
	Die Vorgabe für den Regler soll eine t(5\%) Zeit von 0,3 Sekunden sein. Mithilfe einer Faustformel kann nun der Der Realteil des Poles bestimmt werden. Es ergibt sich dafür ein Realteil von -10 für den Pol des Geschlossenen Regelkreises des P Reglers. Der Geschlossene Regelkreis weist folgende Form auf: 
\begin{align}
G(s)_(geschl.)=(1275K_p)/(1275K_p+ 1+9,17s)
 \end{align}
 nun werden daraus die Pole in Abhängigkeit des Faktors Kp bestimmt. Daraus folgt das der Wert für 
\begin{align}
K_p=0,0711
 \end{align} 
betragen muss. 
	Der P-Regler wird nun am Simulink Modell getestet. Als Stationärer Endwert wird 1 angestrebt. Um diesen Zu erreichen wird eine Vorsteuerung mit dem Verstärkungsfaktor 
\begin{align}
K_vor=\frac{1600}{1581,5}
 \end{align} 
 die benötigte Stellgröße liegt über 5Volt aber im realistischen Bereich, dennoch liegt diese über 0,3 Sekunden lang an, sodass hier Handlungsbedarf besteht wenn das Reale System einen Error Code ausgibt.
	Der P-Regler wird mit Vorsteuerung an der realen Maschine getestet. Es fällt auf das die Maschine trotz eines überschreitens der kritischen Überspannungszeit in der Simulation korrekt arbeitet. Hier sind die Modellabweichungen so groß, dass wir die kritische Spannung weniger als 0,3 Sekunden  lang halten. Es lässt sich durch die nur näherungsweise zutreffende Streckenübertragungsfunktion in form eines PT1 Gliedes erklären. Das System ist nur für den einen Sollwert von 1600 Grad/sec stationär genau. Umso mehr die Sollwertgröße von 1600 Grad/sec abweicht desto Größer wird die Abweichung des Stationären Endwertes. Dies fällt erst bei weniger als 800 Grad/sec deutlich auf und ist bei 400 Grad/sec gut zu erkennen.
	Um Stationäre Genauigkeit für alle Sollwerte zu erreichen wird dem Regler ein I-Anteil hinzugefügt. Der PI-Regler wird über das SISO Tool ausgelegt. Aus den Anforderungen t(5\%)=0,4s und kein Überschwingen woraus sich ergibt das die Pole rein reell sein müssen ergibt sich für den schnellst möglichen Regler die Übertragungsfunktion 
$G(s)_PI=0,0074*(1-7,1s)/s$ ferner ist keine Vorsteuerung erforderlich, da der PI-Regler ohnehin eine stationäre Genauigkeit aufweist. 

\subsection{Digitale PD-Regelung von  y\textsubscript{w} und $\alpha$}
\subsubsection{Einfluss der Abtastzeit}

In diesem Versuch wird der Einfluss der Abtastzeit auf das Ergebnis der Regelung genommen. Da wir die Regelfunktion des PD-Regler diskretisiert haben und danach sich das Ergebnis im k Bereich befindet, muss dieses Ergebnis dann noch in die Bildebene Z gebracht werden. 
%TODO Deltas aus dem Text entfernen!
\begin{align}
   G_R(s) = K_P + K_D s = K_P *s + K_D *·(1 + s *T_D)  \\
   y_k= K_P * k+ \frac{K_D}{T_D} *( k - 1 )  \\
   G_R(z) = K_p * z + \frac{K_D}{T_D*T} *\frac{z-1}{z}
\end{align}
Was dabei einkalkuliert wurde, ist, dass T direkt die Abtastzeit des Reglers Berücksichtigt und daraus sich der Regelkreis beeinflussen lässt.
\begin{enumerate}
\item Die Abstastzeit wird auf t = festgelegt.
\begin{figure}[H]
	\centering
	\includegraphics[width=0.6\textwidth]{Figure45a200mT}
	\caption{Verlauf des Experimentes mit einer Abtastzeit von 200ms}
	\label{img:grafik-dummy}
\end{figure}
Beobachtung:
Bei der Abtaszeit im oberen Grenzbereich schaukelt sich die eigentliche Grundbewegung auf und die Pendelbewegung wird eher verstärkt als gedämpft. Das sorgt für ein stärkere Pendelbewegung als die ungeregelte Bewegung. 
\item Die Abtastzeit wird auf t = 1 ms festgelegt.
\begin{figure}[H]
	\centering
	\includegraphics[width=0.6\textwidth]{45a1mT}
	\caption{Verlauf des Experimentes mit einer Abtastzeit von 1ms}
	\label{img:grafik-dummy}
\end{figure}
Beobachtung: 
Bei dieser kleineren Abtastzeit arbeitet der Regler so, dass das Schwingen des Seils stark vermieden wird. Es sorgt dafür, dass das die Auslenkung des Seils verringert wird.
\end{enumerate}
\textbf { Fazit:} Das Fazit, was aus diesem Versuch gezogen werden muss ist, dass die diskretisierung einer Messung und die diskretisierung eines Reglers in ausreichender Genauigkeit vorgenommen werden muss.
\subsubsection{Warum macht eine Erweiterung um einen PD-Regler Sinn?}
\begin{figure}[H]
	\centering
	\includegraphics[width=0.6\textwidth]{PDRegler.png}
	\caption{Aufbau der PD-Regelung im realen System}
	\label{img:grafik-dummy}
\end{figure}
Dazu müssen wir uns die Beschreibung des Systems anschauen und mit den Zielen der Regelung vergleich. Es soll die Abweichung des Seilwinkels möglichst gering sein und die Position des Krans möglichst exakt erreicht werden. Da ein P-Regler immer eine dauerhafte Regelabweichung mit sich bringt, so kann mit dem PD-Regler gut auf eine schnelle Änderung reagiert werden, da dieser besser auf die Veränderung einer Regelgröße reagiert. Diese Veränderung kann gut mit einem D-Regler geregelt werden um weiter einer möglichen dauerhaften Abweichung Regelungstechnik zu begegnen werden die P-Regelanteile genutzt. Dies macht den PD-Regler an dieser Stelle zum idealen Regler für den Kran.

\subsubsection{Test des PD-Regler im Realen System}
\begin{figure}[H]
	\centering
	\includegraphics[width=0.6\textwidth]{PD-ReglerTestReal}
	\caption{Aufbau der PD-Regelung im realen System}
	\label{img:grafik-dummy}
\end{figure}
Bei diesem Versuch lässt sich beobachten, dass es in der Eingelphase, wenn die Überlagerung des P-Reglers nicht mehr mehr in der Sättigung des Stellmotors ist, ein zittern der Kurve zu beobachten. Auch beim Versuch im realen System gibt es dieses Regelflackern.

\subsubsection{Filterung über ein PT-1 Glied}
Es soll zu dem Regler ein PT-1 Filter implementiert werden. Die Idee bei diesem Versuch ist es, dass das Rauschen unterdrückt wird und die Zitterbewegungen am Ende zu vermeiden und damit gleichzeitig auch die Ausregelzeit verkürzen. Wir implementieren dazu das PT-1 Glied in das gegebene Simulinkmodell des Vorversuchs. Dieses Modell wird sowohl im Winkel, wie auch in der Streckenregelung im ein PT-1 Glied erweitert.

\begin{figure}[H]
	\centering
	\includegraphics[width=0.6\textwidth]{Figure45b1}
	\caption{Aufbau der PD-Regelung im realen System ergänzt mit einer PT1-Strecke zur Filterung der Kleinstabweichungen}
	\label{img:grafik-dummy}
\end{figure}

\subsection{Regelung mit zusätzlicher Stellgrößenbeschränkung}
\subsubsection{Kann Stellgrößenbeschränkung für eine Regelverbesserung sorgen?}
Die neue Struktur korregiert das Problem in gewisser Weise, weil das Verhältnis von Wegstreckeänderung zu Winkel eingeschränkt werden kann. Wenn der Stellgrößenanteil, der Wegstrecke nicht mehr voll ausgestreckt werden kann, begrenzt sich die Geschwindigkeit mit der der Krankwagen bewegt werden kann. Dieser Regelgrößenanteil steht dann der Regelung des Seilwinkels zu. Zusätzlich ist eine begrenzte Beschleunigung des Kranwagens nicht mehr dazu in der Lage einen unbegrenzt großen Winkel zu produzieren. Daraus lässt sich Schlussfolgern, dass eine Stellgrößenbeschäkung die Regelungsgenaurigkeit verbessert.
\subsection{Testen dieser theoretische Stellgrößenbeschränkung im realen Versuchsaufbau}
Nach einigen Versuchsreihen wurde ein Stellte sich der beste Kompromiss bei einer Stellgrößenbeschränkung auf einen Wert von 0,9 ergeben. Das Ergebnis dieser Dokumentation wurde hier dann festgehalten.

\begin{figure}[H]
	\centering
	\includegraphics[width=0.6\textwidth]{Figure45b5mitSaturation}
	\caption{Regelungsdarstellung mit der Stellgrößenbeschränkung und einem PD-Regler}
	\label{img:grafik-dummy}
\end{figure}

Es lässt sich dabei festhalten 
\subsection{Regelung der x- und y- Achse}

%Modell zum Einfügen eines Bildes
%\begin{figure}[H]
%	\centering
%	\includegraphics[width=0.8\textwidth]{}
%	\caption{Teamlogo: Team A}
%	\label{img:grafik-dummy}
%\end{figure}


\end{document}